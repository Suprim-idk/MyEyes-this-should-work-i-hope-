<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathable - Find the best path for you</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ§Ô∏è Pathable</h1>
            <p class="motto">Find the best path for you</p>
            <p>Accessible navigation system with wheelchair accessibility features</p>
        </header>

        <main>
            <!-- Status Display -->
            <section class="status-panel" role="region" aria-label="Navigation Status">
                <div class="status-card">
                    <h2>System Status</h2>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-light" id="statusLight"></span>
                        <span id="statusText">Ready</span>
                    </div>
                </div>

                <div class="distance-card">
                    <h2>Distance Ahead</h2>
                    <div class="distance-display">
                        <span class="distance-value" id="distanceValue">--</span>
                        <span class="distance-unit">cm</span>
                    </div>
                </div>
            </section>

            <!-- Camera Setup -->
            <section class="camera-setup" role="region" aria-label="Camera Setup">
                <div class="camera-card">
                    <h2>Camera Configuration</h2>
                    <div class="camera-status" id="cameraStatus">
                        <span class="status-light" id="cameraLight"></span>
                        <span id="cameraStatusText">No camera connected</span>
                    </div>
                    
                    <div class="camera-options">
                        <div class="camera-option">
                            <h3>üì± Phone Camera</h3>
                            <p>Use your phone as a camera via DroidCam</p>
                            <div class="input-group">
                                <input 
                                    type="text" 
                                    id="phoneIP" 
                                    placeholder="192.168.1.100" 
                                    aria-label="Phone IP Address">
                                <button 
                                    class="control-btn phone-btn" 
                                    onclick="connectPhoneCamera()">
                                    Connect Phone
                                </button>
                            </div>
                        </div>
                        
                        <div class="camera-option">
                            <h3>üîå USB Camera</h3>
                            <p>Connect a USB webcam or built-in camera</p>
                            <div class="input-group">
                                <select id="usbCameraId" aria-label="USB Camera ID">
                                    <option value="0">Camera 0 (Default)</option>
                                    <option value="1">Camera 1</option>
                                    <option value="2">Camera 2</option>
                                </select>
                                <button 
                                    class="control-btn usb-btn" 
                                    onclick="connectUSBCamera()">
                                    Connect USB
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Navigation Controls -->
            <section class="controls" role="region" aria-label="Navigation Controls">
                <button 
                    id="startBtn" 
                    class="control-btn start-btn" 
                    onclick="startNavigation()"
                    aria-describedby="start-help">
                    üöÄ Start Navigation
                </button>
                
                <button 
                    id="stopBtn" 
                    class="control-btn stop-btn" 
                    onclick="stopNavigation()" 
                    disabled
                    aria-describedby="stop-help">
                    üõë Stop Navigation
                </button>
                
                <div id="start-help" class="sr-only">Click to begin navigation assistance</div>
                <div id="stop-help" class="sr-only">Click to stop navigation assistance</div>
            </section>

            <!-- Live Instructions -->
            <section class="instructions" role="region" aria-label="Navigation Instructions" aria-live="polite">
                <div class="instruction-card">
                    <h2>Current Instruction</h2>
                    <div class="instruction-display" id="instructionDisplay">
                        <span class="instruction-text" id="instructionText">Press Start to begin navigation</span>
                    </div>
                </div>
            </section>

            <!-- Wheelchair Accessibility Panel -->
            <section class="wheelchair-info" role="region" aria-label="Wheelchair Accessibility Information">
                <div class="info-row">
                    <div class="info-card">
                        <h3>Path Analysis</h3>
                        <div class="info-details">
                            <div class="detail-item">
                                <span class="detail-label">Width:</span>
                                <span class="detail-value" id="pathWidth">--cm</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Surface:</span>
                                <span class="detail-value" id="surfaceType">Unknown</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accessibility-alerts" id="accessibilityAlerts" style="display: none;">
                        <h3>‚ö†Ô∏è Accessibility Obstacles</h3>
                        <div class="alerts-list" id="alertsList"></div>
                    </div>
                </div>
                
                <div class="route-suggestions" id="routeSuggestions" style="display: none;">
                    <h3>üí° Alternative Route Suggestion</h3>
                    <p class="suggestion-text" id="alternativeRoute"></p>
                </div>
            </section>

            <!-- Real-time Alerts -->
            <section class="alerts" role="alert" aria-live="assertive">
                <div id="alertBox" class="alert-box hidden">
                    <span id="alertText"></span>
                </div>
            </section>
        </main>

        <footer>
            <p>Designed for accessibility ‚Ä¢ Voice guidance enabled</p>
            <div class="navigation-links" style="margin-top: 20px; text-align: center;">
                <a href="/maps" class="nav-link-btn" style="display: inline-block; padding: 10px 20px; background: #2c5aa0; color: white; text-decoration: none; border-radius: 5px; margin: 5px;">
                    üó∫Ô∏è Nepal Maps Navigation
                </a>
                <a href="/mobile" class="nav-link-btn" style="display: inline-block; padding: 10px 20px; background: #28a745; color: white; text-decoration: none; border-radius: 5px; margin: 5px;">
                    üì± Mobile Camera Navigation
                </a>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
</body>
</html>