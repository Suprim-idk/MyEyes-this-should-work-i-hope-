<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mobile Navigation Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <div class="mobile-container">
        <!-- Header -->
        <header class="mobile-header">
            <h1>‚ôø Wheelchair Navigation</h1>
            <div class="status-indicator" id="systemStatus">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Ready</span>
            </div>
        </header>

        <!-- Camera View -->
        <section class="camera-section">
            <div class="camera-container" id="cameraContainer">
                <video id="cameraVideo" autoplay playsinline muted></video>
                <canvas id="analysisCanvas" style="display: none;"></canvas>
                
                <!-- Camera Overlay -->
                <div class="camera-overlay">
                    <div class="center-guide"></div>
                    <div class="distance-overlay" id="distanceOverlay">
                        <span class="distance-value" id="distanceValue">--</span>
                        <span class="distance-unit">cm</span>
                    </div>
                </div>
                
                <!-- Camera Placeholder -->
                <div class="camera-placeholder" id="cameraPlaceholder">
                    <div class="placeholder-content">
                        <span class="camera-icon">üìπ</span>
                        <p>Tap to access camera</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Instruction Panel -->
        <section class="instruction-panel">
            <div class="instruction-card" id="instructionCard">
                <div class="instruction-icon" id="instructionIcon">‚ÑπÔ∏è</div>
                <div class="instruction-text" id="instructionText">Tap Start to begin navigation</div>
            </div>
        </section>

        <!-- Wheelchair Accessibility Panel -->
        <section class="wheelchair-panel">
            <div class="accessibility-info">
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Path Width</span>
                        <span class="info-value" id="pathWidthValue">--cm</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Surface</span>
                        <span class="info-value" id="surfaceTypeValue">Unknown</span>
                    </div>
                </div>
            </div>
            
            <div class="obstacles-alert" id="obstaclesAlert" style="display: none;">
                <div class="alert-header">‚ö†Ô∏è Accessibility Alert</div>
                <div class="obstacle-list" id="obstacleList"></div>
            </div>
            
            <div class="route-suggestion" id="routeSuggestion" style="display: none;">
                <div class="suggestion-header">üí° Alternative Route</div>
                <div class="suggestion-text" id="suggestionText"></div>
            </div>
        </section>

        <!-- Controls -->
        <section class="mobile-controls">
            <button id="cameraBtn" class="control-button camera-button" onclick="toggleCamera()">
                üìπ Enable Camera
            </button>
            
            <button id="startBtn" class="control-button start-button" onclick="startNavigation()" disabled>
                üöÄ Start Navigation
            </button>
            
            <button id="stopBtn" class="control-button stop-button" onclick="stopNavigation()" disabled>
                üõë Stop
            </button>
            
            <button id="emergencyBtn" class="control-button emergency-button" onclick="triggerEmergency()">
                üö® EMERGENCY
            </button>
        </section>

        <!-- Settings Panel -->
        <section class="settings-panel">
            <div class="setting-item">
                <label for="voiceToggle">üîä Voice Guidance</label>
                <input type="checkbox" id="voiceToggle" checked>
            </div>
            
            <div class="setting-item">
                <label for="sensitivitySlider">‚ö° Sensitivity</label>
                <input type="range" id="sensitivitySlider" min="30" max="100" value="50">
                <span id="sensitivityValue">50cm</span>
            </div>
            
            <div class="setting-item">
                <label for="emergencyContact">üìû Emergency Contact</label>
                <input type="tel" id="emergencyContact" placeholder="Phone number" style="padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0; width: 120px;">
            </div>
        </section>

        <!-- Alert System -->
        <div class="alert-system" id="alertSystem">
            <div class="alert-message" id="alertMessage"></div>
        </div>
        
        <!-- Emergency Modal -->
        <div class="emergency-modal" id="emergencyModal" style="display: none;">
            <div class="emergency-content">
                <h2>üö® EMERGENCY ACTIVATED</h2>
                <div class="emergency-status" id="emergencyStatus">
                    <p>Calling for help...</p>
                    <div class="emergency-countdown" id="emergencyCountdown">10</div>
                </div>
                <div class="emergency-actions">
                    <button class="emergency-action-btn call-btn" onclick="callEmergency()">
                        üìû Call Emergency Contact
                    </button>
                    <button class="emergency-action-btn location-btn" onclick="shareLocation()">
                        üìç Share Location
                    </button>
                    <button class="emergency-action-btn alert-btn" onclick="alertBystanders()">
                        üì¢ Alert Bystanders
                    </button>
                    <button class="emergency-action-btn cancel-btn" onclick="cancelEmergency()">
                        ‚ùå Cancel Emergency
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/mobile.js') }}"></script>
    <script src="{{ url_for('static', filename='js/emergency.js') }}"></script>
</body>
</html>